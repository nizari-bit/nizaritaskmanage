<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nizar | Task Manager</title>
    
        <!-- Favicon for Browsers -->
        <link rel="icon" href="favicon_io/favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon_io/favicon-32x32.png" type="image/png">
        <link rel="icon" href="favicon_io/favicon-16x16.png" type="image/png">
    
        <!-- Apple Touch Icons for iOS Devices -->
        <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="152x152" href="favicon_io/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="120x120" href="favicon_io/apple-touch-icon-120x120.png">
    
        <!-- Android Icons for Web Apps -->
        <link rel="icon" type="image/png" sizes="192x192" href="favicon_io/android-chrome-192x192.png">
        <link rel="manifest" href="favicon_io/site.webmanifest">
    
        <!-- Windows Tile Icons -->
        <meta name="msapplication-TileImage" content="favicon_io/mstile-150x150.png">
        <meta name="msapplication-TileColor" content="#ffffff">
    </head>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Include Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <style>
    /* Basic styles */
    body {
        font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
        overflow-x: hidden;
        scroll-behavior: smooth;
    }

    .home {
        width: 90%;
        max-width: 1000px;
        background-color: #ffffff;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        max-height: 100%;
        overflow-y: auto;
    }

    h1 {
        text-align: center;
        color: rgb(3, 82, 3);
        margin-bottom: 20px;
    }

    .input-area {
        display: flex;
        flex-direction: column;
        margin-bottom: 20px;
    }

    textarea {
        background-color: rgb(240, 226, 226);
        border: 2px solid #ccc;
        padding: 10px;
        font-size: 18px;
        border-radius: 5px;
        margin-bottom: 15px;
        width: 100%;
        resize: vertical;
        outline: none;
        border-bottom: 2px solid rgb(31, 30, 30);
        white-space: pre-wrap;
        word-wrap: break-word;
    }

    .top-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .top-controls button {
        padding: 10px 20px;
        background-color: rgb(21, 181, 245);
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s ease;
        outline: none;
    }

    .top-controls button:hover {
        background-color: rgb(13, 142, 195);
    }

    .top-controls #remAll {
        background-color: rgb(255, 94, 94);
    }

    .top-controls #remAll:hover {
        background-color: rgb(204, 62, 62);
    }

    #searchInput {
        padding: 8px;
        width: 200px;
        border: 2px solid #ccc;
        border-radius: 5px;
        font-size: 14px;
    }

    ol {
        padding-left: 0;
        margin: 0;
        max-height: 400px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: #888 #f0f0f0;
    }

    ol::-webkit-scrollbar {
        width: 8px;
    }

    ol::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 5px;
    }

    ol::-webkit-scrollbar-track {
        background-color: #f0f0f0;
    }

    li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        background-color: rgb(185, 183, 183);
        margin-bottom: 10px;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        position: relative;
    }

    li button {
        width: 80px;
        height: 30px;
        margin-left: 10px;
        background-color: rgb(21, 181, 245);
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        border: none;
        outline: none;
    }

    li .task-text {
        flex-grow: 1;
        padding-right: 10px;
        white-space: pre-wrap;
        word-wrap: break-word;
    }

    li .task-date {
        font-size: 12px;
        color: #888;
    }

    .task-checkbox {
        margin-right: 10px;
        margin-left: 10px;
    }

    .username-form {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .username-form input {
        padding: 10px;
        font-size: 16px;
        width: 200px;
        margin-bottom: 20px;
        border: 2px solid #ccc;
        border-radius: 5px;
    }

    .username-form button {
        padding: 10px 20px;
        background-color: rgb(21, 181, 245);
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }

    .input-container {
        display: flex;
        align-items: center;
        position: relative;
        width: 250px;
    }

    .input-container input {
        padding: 10px;
        font-size: 16px;
        width: 100%;
        border: 2px solid #ccc;
        border-radius: 5px;
    }

    .input-container i {
        position: absolute;
        right: 10px;
        padding-top: 30px;
        transform: translateY(-50%);
        cursor: pointer;
    }
    #message{
        padding-top: 20px;
        width: 80%;
        max-width: 800px;
    }
    #setUsernameBtn i {
        margin-right: 8px;
    }

    /* Responsiveness */
    @media (max-width: 768px) {
        .home {
            padding: 20px;
        }

        .top-controls {
            flex-direction: column;
            align-items: flex-start;
        }

        .top-controls button {
            width: 100%;
            margin-bottom: 10px;
        }

        #searchInput {
            width: 100%;
            margin-top: 10px;
        }

        ol {
            max-height: 300px;
        }

        .input-container input {
            width: 100%;
        }

        .input-container {
            width: 100%;
            justify-content: center;
        }
    }

    @media (max-width: 480px) {
        h1 {
            font-size: 18px;
        }

        .username-form input {
            width: 180px;
            font-size: 14px;
        }

        .username-form button {
            width: 100%;
        }

        .input-area textarea {
            font-size: 16px;
        }

        .top-controls button {
            font-size: 12px;
            padding: 8px;
        }

        #searchInput {
            font-size: 12px;
        }

        li {
            font-size: 14px;
            padding: 8px;
        }

        li button {
            font-size: 12px;
            padding: 8px;
        }

        .input-container input {
            font-size: 14px;
        }

        .input-container i {
            padding-top: 25px;
        }
    }
    .privacy-terms {
    margin-top: 20px;
    text-align: left;
    font-size: 14px;
    color: #444;
}

.checkbox-container {
    margin-top: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.checkbox-container input {
    width: 20px;
    height: 20px;
}

.checkbox-container label {
    cursor: pointer;
}

.policy-details {
    margin-top: 15px;
    background-color: #f9f9f9;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 13px;
    color: #555;
}

.policy-details a {
    color: #007bff;
    text-decoration: none;
}

.policy-details a:hover {
    text-decoration: underline;
}
#policyContent h3{
    text-align: center;
}
#policyContent p{
    width: 80%;
    max-width: 800px;
    text-align: center;
}
.footer{
    float: bottom;
    opacity: 0.7;
    z-index: 1000;
    padding-top: 40px;
}
#tambu{
    text-align: center;
    font-size: 14px;
    opacity: 0.4;
}
</style>

</head>

<body>
    <!-- Username Form -->
    <div class="username-form" id="usernameForm">
        <h1><i class="bi bi-house-door"></i> Welcome! Please enter your username</h1>
        <div class="input-container">
            <input type="password" id="usernameInput" placeholder="Enter username" />
            <i id="togglePassword" class="bi bi-eye-fill"></i>
        </div>
        <button id="setUsernameBtn">
            <i class="bi bi-check-circle"></i> Enter
        </button>
        <p id="message" style="font-size: 14px; color: #666; text-align: center;">
            Enter your username to get started with our Task Manager. The username you create now will be the password that you will use access your details all the time. Keep it safe, and make sure you make it <span style="color: red">UNIQUE</span>.
            You can reveal the username by clicking the eye icon. Created with ‚ù§Ô∏è, love üíñ, and joy üòäüéâ. We wish you "Happy New Year üéâüéÜü•≥üéáüéä!".
        </p>
        <div class="privacy-container" style="margin-top: 20px; text-align: center;">
            <input type="checkbox" id="privacyCheckbox" />
            <label for="privacyCheckbox" style="font-size: 14px; color: #666;">
                I agree to the
                <a href="#" id="privacyPolicyLink" style="color: #007bff;">Privacy Policy</a>
            </label>
        </div>
        
        <div id="policyContent"
            style="display: none; margin-top: 10px; padding: 10px; background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 5px; text-align: left; font-size: 13px; color: #555;">
            <h3 style="margin-top: 0;">Privacy Policy</h3>
            <p>
                Your data will be securely stored and not shared with third parties without your consent. Your Details can not be accessed with anyone even the one who made this page. Feel safe with us.
                For more details, Contact us: <a href="#" style="text-decoration: none;">+255 750 761 558</a>.
            </p>
            
        </div>
        <div class="footer">
            <footer>&copy; Created By Nizar Idd</footer>
        </div>
    </div>

    <!-- Task Manager -->
    <div class="home" id="taskArea" style="display: none;">
        <h1><i class="bi bi-list-check"></i> Manage Your Task Here</h1>
        <p id="tambu">&copy; Created By Nizar Idd</p>
        <div class="input-area">
            <textarea id="itemInput" placeholder="Add a new task" rows="4"></textarea>
        </div>

        <!-- Flex container for buttons and search field -->
        <div class="top-controls">
            <div>
                <!-- Add Item Button with Plus Icon -->
                <button id="addItem" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Add Item
                </button>

                <!-- Remove All Button with Trash Icon -->
                <button id="remAll" class="btn btn-danger">
                    <i class="bi bi-trash"></i> Remove All
                </button>

            </div>
            <input type="text" id="searchInput" placeholder="Search Tasks">
        </div>

        <ol id="myList"></ol>
    </div>
        
    <script>
        const setUsernameBtn = document.getElementById('setUsernameBtn');
        const privacyCheckbox = document.getElementById('privacyCheckbox');
        const usernameInput = document.getElementById('usernameInput');

            setUsernameBtn.addEventListener('click', () => {
                const username = usernameInput.value.trim();

                if (username === '') {
                    alert('Please enter a username.');
                    usernameInput.focus(); // Redirect focus to the username input
                    return;
                }

                if (!privacyCheckbox.checked) {
                    const confirmPrivacy = alert('You must agree to the Privacy Policy and Terms of Service.');
                    if (!confirmPrivacy) {
                        privacyCheckbox.focus(); // Redirect focus to the privacy checkbox
                        return false;
                    }
                }

                // Proceed with further logic for username storage
            });

        // Get elements for password toggle
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('usernameInput');

        // Toggle password visibility when the eye icon is clicked
        togglePassword.addEventListener('click', () => {
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;

            if (type === 'password') {
                togglePassword.classList.replace('bi-eye-slash-fill', 'bi-eye-fill');
            } else {
                togglePassword.classList.replace('bi-eye-fill', 'bi-eye-slash-fill');
            }
        });

        const list = document.getElementById('myList');
        const input = document.getElementById('itemInput');
        const addButton = document.getElementById('addItem');
        const removeAllButton = document.getElementById('remAll');
        const searchInput = document.getElementById('searchInput');
        const usernameForm = document.getElementById('usernameForm');
        const taskArea = document.getElementById('taskArea');
        let currentUser = '';

        // Load tasks for a specific user from localStorage
        const loadTasksForUser = (user) => {
            const savedTasks = JSON.parse(localStorage.getItem(user)) || [];
            savedTasks.forEach(task => createTask(task.text, task.timestamp, task.checked));
        };

        // Function to create a new task
        const createTask = (taskText, timestamp = '', isChecked = false) => {
            const inputItem = document.createElement('li');

            const textNode = document.createElement('span');
            textNode.classList.add('task-text');
            textNode.textContent = taskText;
            inputItem.appendChild(textNode);

            const dateNode = document.createElement('span');
            dateNode.classList.add('task-date');
            dateNode.textContent = timestamp;
            inputItem.appendChild(dateNode);

            const check = document.createElement('input');
            check.type = 'checkbox';
            check.checked = isChecked;
            check.classList.add('task-checkbox');
            check.addEventListener('click', () => {
                inputItem.classList.toggle('high', check.checked);
                saveTasksToLocalStorage(); // Save after checking
            });

            const removeBtn = document.createElement('button');
            removeBtn.innerHTML = '<i class="bi bi-trash"></i>';  // Trash icon for remove
            removeBtn.style.backgroundColor = "rgb(255, 94, 94)";
            removeBtn.addEventListener('click', () => {
                const confirmDelete = confirm('Are you sure you want to remove this task?');
                if (confirmDelete) {
                    inputItem.remove();
                    saveTasksToLocalStorage(); // Save after removal
                }
            });

            // Edit button with icon
            const editBtn = document.createElement('button');
            editBtn.innerHTML = '<i class="bi bi-pencil"></i>';  // Edit (pencil) icon
            editBtn.style.backgroundColor = "rgb(21, 181, 245)";
            editBtn.addEventListener('click', () => {
                // Replace text with textarea for editing
                const textarea = document.createElement('textarea');
                textarea.value = textNode.textContent;
                inputItem.replaceChild(textarea, textNode);

                // Change the button to "Save" to save the edited task
                editBtn.innerHTML = '<i class="bi bi-save"></i></i>';  // Save (check) icon
                editBtn.addEventListener('click', () => {
                    textNode.textContent = textarea.value;
                    inputItem.replaceChild(textNode, textarea);
                    editBtn.innerHTML = '<i class="bi bi-pencil"></i>';  // Switch back to edit
                    saveTasksToLocalStorage(); // Save after editing
                });
            });

            inputItem.appendChild(check);
            inputItem.appendChild(removeBtn);
            inputItem.appendChild(editBtn);

            list.appendChild(inputItem);
        };

        // Save tasks to localStorage
        const saveTasksToLocalStorage = () => {
            const tasks = [];
            const taskElements = document.querySelectorAll('#myList li');
            taskElements.forEach(item => {
                const taskText = item.querySelector('.task-text').textContent;
                const timestamp = item.querySelector('.task-date').textContent;
                const checked = item.querySelector('.task-checkbox').checked;
                tasks.push({ text: taskText, timestamp, checked });
            });

            localStorage.setItem(currentUser, JSON.stringify(tasks));
        };

        // Add event listener to the "Add Item" button
        addButton.addEventListener('click', () => {
            if (input.value.trim() === '') {
                alert("Please enter a task.");
                return;
            }
            const taskText = input.value.trim();
            const timestamp = new Date().toLocaleString();
            createTask(taskText, timestamp);
            saveTasksToLocalStorage();
            input.value = ''; // Clear input field
        });

        // Remove all tasks
        removeAllButton.addEventListener('click', () => {
            const confirmDelete = confirm('Are you sure you want to delete all tasks?');
            if (confirmDelete) {
                list.innerHTML = '';
                saveTasksToLocalStorage();
            }
        });

        // Search tasks functionality
        searchInput.addEventListener('input', () => {
            const filter = searchInput.value.toLowerCase();
            const tasks = document.querySelectorAll('#myList li');
            tasks.forEach(task => {
                const text = task.querySelector('.task-text').textContent.toLowerCase();
                task.style.display = text.includes(filter) ? '' : 'none';
            });
        });

        // Handle username form submission
        setUsernameBtn.addEventListener('click', () => {
            const username = usernameInput.value.trim();
            if (username !== '') {
                currentUser = username;
                usernameForm.style.display = 'none';
                taskArea.style.display = 'block';
                loadTasksForUser(username);
            }
        });
    const privacyPolicyLink = document.getElementById('privacyPolicyLink');
        const termsServiceLink = document.getElementById('termsServiceLink');
        const policyContent = document.getElementById('policyContent');

        privacyPolicyLink.addEventListener('click', (e) => {
            e.preventDefault();
            togglePolicyContent();
        });

        termsServiceLink.addEventListener('click', (e) => {
            e.preventDefault();
            togglePolicyContent();
        });

        function togglePolicyContent() {
            policyContent.style.display = policyContent.style.display === 'none' ? 'block' : 'none';
        }

    </script>
</body>

</html>